{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home Vent</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" href="{% static 'home_vent/favicon.ico' %}" sizes="any">
    <link rel="apple-touch-icon" href="{% static 'home_vent/apple-touch-icon.png' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'home_vent/main.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
    function getValue(fieldName) {
        url = "get/" + fieldName;
        $.getJSON(url,
            function(value) {
                updateValueInUI(key, result[key]);
            }
        );
    }

    function getAllValues() {
        url = "getAll";
        $.getJSON(url,
            function(result) {
                for(key in result) {
                    updateValueInUI(key, result[key]);
                }
                setTimeout("getAllValues()", 2000);
            }
        );
    }

    window.onload = function() {
        getAllValues();

        $("img").click(function() {
            getAllValues();
        });
    }

    function updateValueInUI(fieldName, value) {
        if (fieldName.includes("humidity") ||
            fieldName.includes("duty") ||
            fieldName.includes("flow") ||
            fieldName.includes("power_consumption")) {
            value = parseFloat(value)
        }
        $("#"+ fieldName.replace('.','_') + "_div").text(value);
    }

    </script>
</head>
<body>
    
    
    <div id="image_container_div">
        <img src="{% static 'home_vent/vent_exchange.png' %}">

        <!-- TOP -->
        <div id="comfoair_air_exhaust_temperature_div"></div>
        <div id="comfoair_air_exhaust_humidity_div"></div>
        <div id="comfoair_air_outdoor_temperature_div"></div>
        <div id="comfoair_air_outdoor_humidity_div"></div>

        <div id="comfoair_fan_exhaust_flow_div"></div>
        <div id="comfoair_fan_exhaust_duty_div"></div>
        
        <!-- MIDDLE -->
        <div id="comfoair_power_consumption_ventilation_div"></div>
        <div id="comfoair_ventilation_level_div"></div>
        <div id="comfoair_rmot_div"></div>

        <!-- BOTTOM -->
        <div id="comfoair_fan_supply_duty_div"></div>
        <div id="comfoair_fan_supply_flow_div"></div>
        
        <div id="comfoair_air_supply_temperature_div"></div>
        <div id="comfoair_air_supply_humidity_div"></div>
        <div id="comfoair_air_extract_temperature_div"></div>
        <div id="comfoair_air_extract_humidity_div"></div>
    </div>   
    
</body>
</html>
