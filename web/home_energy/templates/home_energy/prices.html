{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home Energy</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="icon" href="{% static 'home_energy/favicon.ico' %}" sizes="any">
    <link rel="apple-touch-icon" href="{% static 'home_energy/apple-touch-icon.png' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'home_energy/usage.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
    function getAllPrices() {
        url = "getAllPrices";
        $.getJSON(url,
            function(result) {
                $("#prices_div").html("");
                for(i in result) {
                    addPriceDiv(result[i]);
                }
            }
        );
    }

    window.onload = function() {
        getAllPrices();

        /*$("#set_boost_60_min_btn").click(function() {
            doAction("boost_60_min");
        });*/
    }

    function formatEpochInSec(epoch) {
        date = new Date(epoch * 1000);
        return date.toLocaleDateString()
    }

    function addPriceDiv(price) {
        html = "<div>";
        html += price.id + " " + formatEpochInSec(price.starttime) + " " + price.down + " " + price.up + " " + price.peak
        html += "</div>";
        $("#prices_div").append(html)
    }

    </script>
</head>
<body>
    <h1>Prices</h1>
    </br>
    <div id="prices_div">
    </div>
    <a href="{% url 'home-energy:usage' %}">Usage</a>
    </br>
</body>
</html>
